(this["webpackJsonpmanta-front-end"]=this["webpackJsonpmanta-front-end"]||[]).push([[0],{565:function(e){e.exports=JSON.parse('{"APP_NAME":"substrate-front-end-tutorial","DEVELOPMENT_KEYRING":false,"RPC":{}}')},614:function(e){e.exports=JSON.parse('{"PROVIDER_SOCKET":"wss://dev-node.substrate.dev"}')},615:function(e){e.exports=JSON.parse('{"SenderData":{"k":"[u8; 32]","void_number":"[u8; 32]","root":"[u8; 32]"},"ReceiverData":{"k":"[u8; 32]","cm":"[u8; 32]","sender_pk":"[u8; 32]","cipher":"[u8; 16]"},"PrivateTransferData":{"sender_1":"SenderData","sender_2":"SenderData","receiver_1":"ReceiverData","receiver_2":"ReceiverData","proof":"[u8; 192]"}}')},620:function(e,t){},640:function(e,t){},658:function(e,t){},661:function(e,t){},663:function(e,t){},673:function(e,t){},675:function(e,t){},705:function(e,t){},707:function(e,t){},714:function(e,t){},715:function(e,t){},804:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(176),i=n.n(c),s=n(2),o=n(184),u=n(873),l=n(869),d=n(876),j=n(874),b=n(867),p=(n(603),n(13)),O=n.n(p),f=n(31),x=n(39),v=n(433),h=n(564),y=n.n(h),m=n(453),E=n(282),S=n(396),g=n.n(S),R=n(565),C=n(614),N=n(615),T=["REACT_APP_PROVIDER_SOCKET","REACT_APP_DEVELOPMENT_KEYRING"].reduce((function(e,t){return void 0!==Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-front-end-template",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]&&(e[t.slice(10)]=Object({NODE_ENV:"production",PUBLIC_URL:"/substrate-front-end-template",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})[t]),e}),{}),w=Object(x.a)(Object(x.a)(Object(x.a)(Object(x.a)({},R),C),T),{},{types:N}),k=n(19),_={socket:y.a.parse(window.location.search).rpc||w.PROVIDER_SOCKET,jsonrpc:Object(x.a)(Object(x.a)({},v.default),w.RPC),types:w.types,keyring:null,keyringState:null,api:null,apiError:null,apiState:null},A=function(e,t){switch(t.type){case"CONNECT_INIT":return Object(x.a)(Object(x.a)({},e),{},{apiState:"CONNECT_INIT"});case"CONNECT":return Object(x.a)(Object(x.a)({},e),{},{api:t.payload,apiState:"CONNECTING"});case"CONNECT_SUCCESS":return Object(x.a)(Object(x.a)({},e),{},{apiState:"READY"});case"CONNECT_ERROR":return Object(x.a)(Object(x.a)({},e),{},{apiState:"ERROR",apiError:t.payload});case"LOAD_KEYRING":return Object(x.a)(Object(x.a)({},e),{},{keyringState:"LOADING"});case"SET_KEYRING":return Object(x.a)(Object(x.a)({},e),{},{keyring:t.payload,keyringState:"READY"});case"KEYRING_ERROR":return Object(x.a)(Object(x.a)({},e),{},{keyring:null,keyringState:"ERROR"});default:throw new Error("Unknown type: ".concat(t.type))}},P=!1,D=a.a.createContext(),I=function(e){var t=Object(x.a)({},_);["socket","types"].forEach((function(n){t[n]="undefined"===typeof e[n]?t[n]:e[n]}));var n=Object(r.useReducer)(A,t),a=Object(s.a)(n,2),c=a[0],i=a[1];return function(e,t){var n=e.apiState,r=e.socket,a=e.jsonrpc,c=e.types;if(!n){t({type:"CONNECT_INIT"});var i=new m.WsProvider(r),s=new m.ApiPromise({provider:i,types:c,rpc:a});s.on("connected",(function(){t({type:"CONNECT",payload:s}),s.isReady.then((function(e){return t({type:"CONNECT_SUCCESS"})}))})),s.on("ready",(function(){return t({type:"CONNECT_SUCCESS"})})),s.on("error",(function(e){return t({type:"CONNECT_ERROR",payload:e})}))}}(c,i),function(e,t){var n=function(){var e=Object(f.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOAD_KEYRING"}),e.prev=1,e.next=4,Object(E.web3Enable)(w.APP_NAME);case 4:return e.next=6,Object(E.web3Accounts)();case 6:n=(n=e.sent).map((function(e){var t=e.address,n=e.meta;return{address:t,meta:Object(x.a)(Object(x.a)({},n),{},{name:"".concat(n.name," (").concat(n.source,")")})}})),g.a.loadAll({isDevelopment:w.DEVELOPMENT_KEYRING},n),t({type:"SET_KEYRING",payload:g.a}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0),t({type:"KEYRING_ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();if(!e.keyringState){if(P)return t({type:"SET_KEYRING",payload:g.a});P=!0,n()}}(c,i),Object(k.jsx)(D.Provider,{value:c,children:e.children})},F=function(){return Object(x.a)({},Object(r.useContext)(D))},K={paramConversion:{num:["Compact<Balance>","BalanceOf","u8","u16","u32","u64","u128","i8","i16","i32","i64","i128"]}},Y=n(21),G=n(844);function U(e){var t=e.accountPair,n=void 0===t?null:t,a=e.label,c=e.setStatus,i=e.color,o=void 0===i?"blue":i,u=e.style,l=void 0===u?null:u,d=e.type,j=void 0===d?"QUERY":d,b=e.attrs,p=void 0===b?null:b,v=e.disabled,h=void 0!==v&&v,y=F().api,m=Object(r.useState)(null),S=Object(s.a)(m,2),g=S[0],R=S[1],C=Object(r.useState)(null),N=Object(s.a)(C,2),T=N[0],w=N[1],_=p.palletRpc,A=p.callable,P=p.inputParams,D=p.paramFields,I=function(){return"SUDO-TX"===j},U=function(){return"UNCHECKED-SUDO-TX"===j};Object(r.useEffect)((function(){Object(f.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&y.query.sudo){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,y.query.sudo.key();case 4:(t=e.sent).isEmpty?w(null):w(t.toString());case 6:case"end":return e.stop()}}),e)})))()}),[y]);var L,B=function(){var e=Object(f.a)(O.a.mark((function e(){var t,r,a,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.address,r=n.meta,a=r.source,!r.isInjected){e.next=9;break}return e.next=4,Object(E.web3FromSource)(a);case 4:i=e.sent,c=t,y.setSigner(i.signer),e.next=10;break;case 9:c=n;case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=e.status,n=(e.events,e.dispatchError);n&&t.isFinalized?c("Transaction failed. Block hash: ".concat(t.asFinalized.toString())):n&&t.isInBlock?c("Transaction failed. Block hash: ".concat(t.asInBlock.toString())):t.isFinalized?c("\ud83d\ude09 Finalized. Block hash: ".concat(t.asFinalized.toString())):c("Current transaction status: ".concat(t.type))},V=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:n=e.sent,r=$(D,P),a=r?y.tx.sudo.sudo((t=y.tx[_])[A].apply(t,Object(Y.a)(r))):y.tx.sudo.sudo(y.tx[_][A]()),c=a.signAndSend(n,M),R((function(){return c}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:n=e.sent,r=y.tx.sudo.sudoUncheckedWeight((t=y.tx[_])[A].apply(t,Object(Y.a)(P)),0),a=r.signAndSend(n,M),R((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:return n=e.sent,r=$(D,P),a=r?(t=y.tx[_])[A].apply(t,Object(Y.a)(r)):y.tx[_][A](),e.next=7,a.signAndSend(n,M);case 7:c=e.sent,R((function(){return c}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(D,P),r=n?(t=y.tx[_])[A].apply(t,Object(Y.a)(n)):y.tx[_][A](),e.next=4,r.send(M);case 4:a=e.sent,R((function(){return a}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e){return e.isNone?c("None"):c(e.toString())},X=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(D,P),e.next=3,(t=y.query[_])[A].apply(t,Object(Y.a)(n).concat([J]));case 3:r=e.sent,R((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$(D,P,{emptyAsNull:!1}),e.next=3,(t=y.rpc[_])[A].apply(t,Object(Y.a)(n).concat([J]));case 3:r=e.sent,R((function(){return r}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=y.consts[_][A];e.isNone?c("None"):c(e.toString())},Z=function(){var e=Object(f.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(g(),R(null)),c("Sending..."),I()&&V()||U()&&W()||"SIGNED-TX"===j&&z()||"UNSIGNED-TX"===j&&H()||"QUERY"===j&&X()||"RPC"===j&&q()||"CONSTANT"===j&&Q();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{emptyAsNull:!0},r=t.map((function(e){return"object"===typeof e&&null!==e&&"string"===typeof e.value?e.value.trim():"string"===typeof e?e.trim():e})),a=e.map((function(e,t){return Object(x.a)(Object(x.a)({},e),{},{value:r[t]||null})}));return a.reduce((function(e,t){var r=t.type,a=void 0===r?"string":r,c=t.value;if(null==c||""===c)return n.emptyAsNull?[].concat(Object(Y.a)(e),[null]):e;var i=c;return a.indexOf("Vec<")>=0?(i=(i=i.split(",").map((function(e){return e.trim()}))).map((function(e){return ee(a)?e.indexOf(".")>=0?Number.parseFloat(e):Number.parseInt(e):e})),[].concat(Object(Y.a)(e),[i])):(ee(a)&&(i=i.indexOf(".")>=0?Number.parseFloat(i):Number.parseInt(i)),[].concat(Object(Y.a)(e),[i]))}),[])},ee=function(e){return K.paramConversion.num.some((function(t){return e.indexOf(t)>=0}))};return Object(k.jsx)(G.a,{basic:!0,color:o,style:l,type:"submit",onClick:Z,disabled:h||!_||!A||!(0===D.length||D.every((function(e,t){var n=P[t];if(e.optional)return!0;if(null==n)return!1;var r="object"===typeof n?n.value:n;return null!==r&&""!==r})))||(I()||U())&&(L=n,!(T&&L&&L.address===T)),children:a})}function L(e){var t=F(),r=t.api,a=t.apiState,c=t.keyring,i=t.keyringState;return"READY"===a&&(window.api=r),"READY"===i&&(window.keyring=c),window.util=n(0),window.utilCrypto=n(17),null}var B=n(582),M=n(866),V=n(871),W=n(870),z=n(286),H=n(186);function J(e){var t=F().keyring,n=e.setAccountAddress,a=Object(r.useState)(""),c=Object(s.a)(a,2),i=c[0],u=c[1],l=t.getPairs().map((function(e){return{key:e.address,value:e.address,text:e.meta.name.toUpperCase(),icon:"user"}})),d=l.length>0?l[0].value:"";Object(r.useEffect)((function(){n(d),u(d)}),[n,d]);var j=Object(r.createRef)();return Object(k.jsx)(M.a,{context:j,children:Object(k.jsx)(V.a,{attached:"top",tabular:!0,style:{backgroundColor:"MidnightBlue",borderColor:"MidnightBlue",paddingTop:"1em",paddingBottom:"1em"},children:Object(k.jsxs)(b.a,{children:[Object(k.jsxs)(V.a.Menu,{position:"left",style:{alignItems:"center"},children:[Object(k.jsx)(V.a.Item,{name:"Transfer",children:Object(k.jsx)(o.b,{to:"/transfer",children:"Transfer"})}),Object(k.jsx)(V.a.Item,{name:"Labs",children:Object(k.jsx)(o.b,{to:"/labs",children:"Labs"})}),Object(k.jsx)(V.a.Item,{name:"Governance",children:Object(k.jsx)(o.b,{to:"/governance",children:"Governance"})})]}),Object(k.jsxs)(V.a.Menu,{position:"right",style:{alignItems:"center"},children:[i?null:Object(k.jsxs)("span",{children:["Add your account with the"," ",Object(k.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://polkadot.js.org/extension/",children:"Polkadot JS Extension"})]}),Object(k.jsx)(B.CopyToClipboard,{text:i,children:Object(k.jsx)(G.a,{basic:!0,circular:!0,size:"large",icon:"user",color:i?"blue":"red"})}),Object(k.jsx)(W.a,{search:!0,selection:!0,clearable:!0,placeholder:"Select an account",options:l,onChange:function(e,t){var r;r=t.value,n(r),u(r)},value:i}),Object(k.jsx)(X,{accountSelected:i})]})]})})})}function X(e){var t=e.accountSelected,n=F().api,a=Object(r.useState)(0),c=Object(s.a)(a,2),i=c[0],o=c[1];return Object(r.useEffect)((function(){var e;return t&&n.query.system.account(t,(function(e){o(e.data.free.toHuman())})).then((function(t){e=t})).catch(console.error),function(){return e&&e()}}),[n,t]),t?Object(k.jsxs)(z.a,{pointing:"left",children:[Object(k.jsx)(H.a,{name:"money",color:"green"}),i]}):null}function q(e){var t=F(),n=t.api;return t.keyring.getPairs&&n.query?Object(k.jsx)(J,Object(x.a)({},e)):null}var Q=n(51),Z=n(35),$=n(877),ee=n(872),te=n(868),ne=n(16),re=n.n(ne);function ae(e){var t=F().api.registry.chainDecimals;return e*new re.a(10).pow(new re.a(t))}function ce(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({addressTo:null,amount:0}),o=Object(s.a)(i,2),u=o[0],l=o[1],j=e.accountPair,b=function(e,t){return l((function(e){return Object(x.a)(Object(x.a)({},e),{},Object(Z.a)({},t.state,t.value))}))},p=u.addressTo,O=u.amount;return Object(k.jsxs)(d.a.Column,{width:8,children:[Object(k.jsx)($.a,{textAlign:"center",children:"Transfer"}),Object(k.jsxs)(ee.a,{children:[Object(k.jsx)(ee.a.Field,{style:{width:"500px",textAlign:"center"},children:Object(k.jsx)(te.a,{fluid:!0,label:"To",type:"text",placeholder:"address",state:"addressTo",onChange:b})}),Object(k.jsx)(ee.a.Field,{style:{width:"500px"},children:Object(k.jsx)(te.a,{fluid:!0,label:"Amount",type:"number",placeholder:"MA",state:"amount",onChange:b})}),Object(k.jsx)(ee.a.Field,{style:{textAlign:"center"},children:Object(k.jsx)(U,{accountPair:j,label:"Submit",type:"SIGNED-TX",setStatus:c,attrs:{palletRpc:"balances",callable:"transfer",inputParams:[p,ae(O)],paramFields:[!0,!0]}})}),Object(k.jsx)("div",{style:{overflowWrap:"break-word"},children:a})]})]})}var ie=n(17);function se(e){var t=e.accountPair,n=Object(r.useState)(""),a=Object(s.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),l=u[0],b=u[1],p=Object(r.useState)(""),x=Object(s.a)(p,2),v=x[0],h=x[1],y=Object(r.useState)(""),m=Object(s.a)(y,2),E=m[0],S=m[1],g=Object(r.useState)(""),R=Object(s.a)(g,2),C=R[0],N=R[1],T=Object(r.useState)(null),w=Object(s.a)(T,2),_=w[0],A=w[1],P=Object(r.useRef)(),D=Object(r.useState)(""),I=Object(s.a)(D,2),F=I[0],K=I[1],Y=function(e){if(!e)return"";for(var t="",n=0;n<e.length;n++)t+=e.slice(n,n+75),t+="\n",n+=75;return t},G=function(e){i(Object(ie.base64Encode)(e.slice(0,96))),b(Object(ie.base64Encode)(e.slice(97,192))),h(Object(ie.base64Encode)(e.slice(193,304))),S(Object(ie.base64Encode)(e.slice(305,416))),N(Object(ie.base64Encode)(e.slice(317,608)))},L=function(e){try{Object(ie.base64Validate)(e)}catch(n){return P.current.value=null,K("File is not valid base64"),!1}var t=Object(ie.base64Decode)(e.trim());return 608===t.length||(P.current.value=null,K("File is ".concat(t.length," bytes, expected 608")),!1)};return Object(k.jsxs)(d.a.Column,{width:10,children:[Object(k.jsx)($.a,{textAlign:"center",children:"Private Transfer"}),Object(k.jsxs)(ee.a,{children:[Object(k.jsxs)(ee.a.Field,{inline:"true",style:{textAlign:"center"},children:[Object(k.jsxs)(z.a,{basic:!0,color:"teal",children:[Object(k.jsx)(H.a,{name:"hand point down"}),"Upload a private payment file (608 bytes)"]}),Object(k.jsx)("input",{accept:".txt",id:"file",type:"file",onChange:function(){K(""),G([]);var e=P.current.files[0];if(e){var t=new FileReader;t.readAsText(e),t.onload=function(){var e=Object(f.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,L(n)&&G(Object(ie.base64Decode)(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},ref:P,style:{marginLeft:0,marginTop:".5em",border:"0px"}}),Object(k.jsx)(j.a,{error:!0,onDismiss:function(){return K("")},header:"Upload failed",content:F,visible:F.length})]}),Object(k.jsxs)(ee.a.Field,{children:[Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Sender1:"})," ",Y(c)]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Sender2:"})," ",Y(l)]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Receiver1:"})," ",Y(v)]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Receiver2:"})," ",Y(E)]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("b",{children:"Proof:"})," ",Y(C)]})]}),Object(k.jsx)(ee.a.Field,{style:{textAlign:"center"},children:Object(k.jsx)(U,{accountPair:t,label:"Submit",type:"SIGNED-TX",setStatus:A,attrs:{palletRpc:"mantaPay",callable:"mantaTransfer",inputParams:[c,l,v,E,C],paramFields:[!0,!0,!0,!0,!0]}})}),Object(k.jsx)("div",{style:{overflowWrap:"break-word"},children:_})]})]})}function oe(e){return Object(k.jsx)("div",{children:"todo"})}function ue(e){var t=e.accountPair;return Object(k.jsxs)(Q.d,{children:[Object(k.jsx)(Q.a,{exact:!0,from:"/",to:"/transfer"}),Object(k.jsx)(Q.b,{path:"/transfer",component:function(){return Object(k.jsx)(ce,{accountPair:t})}}),Object(k.jsx)(Q.b,{path:"/labs",component:function(){return Object(k.jsx)(se,{accountPair:t})}}),Object(k.jsx)(Q.b,{path:"/governance",component:oe})]})}function le(){var e,t=Object(r.useState)(null),n=Object(s.a)(t,2),a=n[0],c=n[1],i=F(),p=i.apiState,O=i.keyring,f=i.keyringState,x=i.apiError,v=a&&"READY"===f&&O.getPair(a),h=function(e){return Object(k.jsx)(u.a,{active:!0,children:Object(k.jsx)(l.a,{size:"small",children:e})})};if("ERROR"===p)return e=x,Object(k.jsx)(d.a,{centered:!0,columns:2,padded:!0,children:Object(k.jsx)(d.a.Column,{children:Object(k.jsx)(j.a,{negative:!0,compact:!0,floating:!0,header:"Error Connecting to Substrate",content:"".concat(JSON.stringify(e,null,4))})})});if("READY"!==p)return h("Connecting to Substrate");if("READY"!==f)return h("Loading accounts (please review any extension's authorization)");var y=Object(r.createRef)();return Object(k.jsx)("div",{ref:y,children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(q,{setAccountAddress:c}),Object(k.jsx)(b.a,{textAlign:"center",style:{paddingTop:"3em"},children:Object(k.jsx)(d.a,{centered:!0,children:Object(k.jsx)(ue,{accountPair:v})})}),Object(k.jsx)(L,{})]})})}function de(){return Object(k.jsx)(I,{children:Object(k.jsx)(le,{})})}i.a.render(Object(k.jsx)(de,{}),document.getElementById("root"))}},[[804,1,2]]]);
//# sourceMappingURL=main.d8d1b95e.chunk.js.map